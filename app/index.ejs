<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>RSS Reader</title>
	<% if (htmlWebpackPlugin.options.appModules) { %>
		<!-- Add `app/node_modules` to global paths so `require` works properly in development -->
		<script>
		require('module').globalPaths.push('<%= htmlWebpackPlugin.options.appModules.replace(/\\/g, '\\\\') %>')
		</script>
		<% } %>
		<script>
		(function() {
			'use strict';
			var shell = require('electron').shell;
			var supportExternalLinks = function(e) {
				console.log("Called");
				var href;
				var isExternal = false;
				var checkDomElement = function(element) {
					if (element.nodeName === 'A') {
						href = element.getAttribute('href');
					}
					if (element.classList.contains('js-external-link')) {
						isExternal = true;
					}
					if (href && isExternal) {
						shell.openExternal(href);
						e.preventDefault();
					} else if (element.parentElement) {
						checkDomElement(element.parentElement);
					}
				};
				checkDomElement(e.target);
			};
			document.addEventListener('click', supportExternalLinks, false);
		}());
		</script>
	</head>
	<body>
		<div id="app"></div>
		<!-- webpack builds are automatically injected -->
	</body>
	</html>
